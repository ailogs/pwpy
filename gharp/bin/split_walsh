#!/bin/tcsh

cd 2011.08.22.bl0716/

goto start

rm -rf *_vp  >& split_walsh.log
rm -rf *_diffwalsh >>& split_walsh.log
rm -rf *-samewal >>& split_walsh.log

# The first calibrator
setenv vis `ls mosfx-3c286-*-100`
if ( -e ${vis} ) then
	echo "doing $vis" >>& split_walsh.log
	java jmir.miriad.UVVisPrep vis=$vis out=${vis}_vp flux=5
	../walshcat ${vis}_vp
endif

if ( -e ${vis}_vp_diffwalsh } then
	java .jmir.miriad.UVDelayPrep vis=${vis}_vp_diffwalsh  out=${vis}_vp_diffwalsh_4mfcal
	java .jmir.miriad.UVDelayPrep vis=${vis}_vp_samewalsh  out=${vis}_vp_samewalsh_4mfcal
endif
exit(0)

# The second calibrator
setenv vis `ls mosfx-3c123-*-100`
if ( -e ${vis} ) then
	echo "vis = $vis"
	java jmir.miriad.UVVisPrep vis=$vis out=${vis}_vp flux=5
	../walshcat ${vis}_vp
endif

if ( ${?{vis}_vp_diffwalsh} != 0 ) then
	java .jmir.miriad.UVDelayPrep vis=${vis}_vp_diffwalsh  out=${vis}_vp_diffwalsh_4mfcal
	java .jmir.miriad.UVDelayPrep vis=${vis}_vp_samewalsh  out=${vis}_vp_samewalsh_4mfcal
endif

start:
# The data 
setenv vis `ls mosfx-bl0716*-100`
if ( -e ${vis} ) then
	echo "vis = $vis"
	java jmir.miriad.UVVisPrep vis=$vis out=${vis}_vp flux=0
endif

cd ..


cd 2011.08.12.bl0716/
cd ..
cd 2011.09.24.bl0716.eve/
cd ..
cd 2011.09.02.bl0917/
cd ..
cd 2011.09.25.bl0716/
cd ..
cd 2011.09.23.bl0716.eve/
cd ..
cd 2011.09.22.bl0716.eve/
cd ..
cd 2011.09.22.bl0716.18/
cd ..
cd 2011.09.22.bl0716.12/
cd ..
cd 2011.09.22.bl0716.03/
cd ..
cd 2011.09.21.bl0716.23.75/
cd ..
cd 2011.09.20.bl0716.18/
cd ..
cd 2011.09.19.bl0716.23.75/
cd ..
cd 2011.09.18.bl0716.23.75/
cd ..
cd 2011.09.18.bl0716.18/
cd ..
cd 2011.09.18.bl0716.12/
cd ..
cd 2011.09.17.bl0716.23.75/
cd ..
cd 2011.09.17.bl0716.18/
cd ..
cd 2011.09.17.bl0716.12/
cd ..
cd 2011.09.16.bl0716.23.75/
cd ..
cd 2011.09.12.bl0716.21.0/
cd ..
cd 2011.09.12.bl0716.18.0/
cd ..
cd 2011.09.12.bl0716.15.0/
cd ..
cd 2011.09.12.bl0716.12.0/
cd ..
cd 2011.09.11.bl0716.23.75/
cd ..
cd 2011.09.11.bl0716.21.0/
cd ..
cd 2011.09.11.bl0716.18.0/
cd ..
cd 2011.09.10.bl0716.16/
cd ..
cd 2011.09.10.bl0716.15/
cd ..
cd 2011.09.09.bl0917/
cd ..
cd 2011.09.09.bl0716.20/
cd ..
cd 2011.09.08.bl0716/
cd ..
cd 2011.08.27.bl0917/
cd ..
cd 2011.08.27.bl0716/
cd ..
cd 2011.08.26.bl0917/
cd ..
cd 2011.08.26.bl0716/
cd ..
cd 2011.08.25.bl0917/
cd ..
cd 2011.08.25.bl0716/
cd ..
cd 2011.08.24.bl0917/
cd ..
cd 2011.08.24.bl0716/
cd ..
cd 2011.08.23.bl0716/
cd ..
cd 2011.08.17.bl0716/
cd ..
cd 2011.08.16.bl0716/
cd ..
cd 2011.08.15.bl0716/
cd ..
cd 2011.09.27.bl0716/
cd ..
cd 2011.09.26.bl0716/
cd ..
cd 2011.09.22.bl0716.06/
cd ..
cd 2011.09.20.bl0716.06/
cd ..
cd 2011.09.18.bl0716.06/
cd ..
cd 2011.09.18.bl0716.06_1040MHz/
cd ..
cd 2011.09.17.bl0716.06/
cd ..
cd 2011.09.17.bl0716.06_1040MHz/
cd ..
cd 2011.09.12.bl0716.9.0/
cd ..
cd 2011.09.12.bl0716.6.0/
cd ..
cd 2011.09.12.bl0716.3.0/
cd ..
cd 2011.09.09.bl0716.8/
cd ..
cd 2011.09.08.bl0917/
